--- origsrc/gerbera-3.0.0/CMakeLists.txt	2025-11-07 19:18:57.000000000 +0900
+++ src/gerbera-3.0.0/CMakeLists.txt	2026-01-08 20:38:58.280556100 +0900
@@ -526,7 +526,8 @@ if (WITH_NPUPNP)
     message(STATUS "Found libnpupnp: ${_UPNP_LIB} (found version ${_UPNP_VERSION})")
 
     target_compile_definitions(libgerbera PUBLIC USING_NPUPNP)
-    target_link_libraries(libgerbera PUBLIC NPUPNP::NPUPNP)
+    target_include_directories(libgerbera PUBLIC ${NPUPNP_INCLUDE_DIR})
+    target_link_libraries(libgerbera PUBLIC ${NPUPNP_LIBRARY})
 else()
     set(REQ_UPNP_VERSION 1.14.6)
     if(CMAKE_SYSTEM_NAME MATCHES "Darwin")
--- origsrc/gerbera-3.0.0/cmake/FindLastFMLib.cmake	2025-11-07 19:18:57.000000000 +0900
+++ src/gerbera-3.0.0/cmake/FindLastFMLib.cmake	2026-01-08 20:42:07.031768800 +0900
@@ -1,8 +1,8 @@
 INCLUDE (FindPackageHandleStandardArgs)
 
 find_package(PkgConfig REQUIRED QUIET)
-PKG_SEARCH_MODULE(LastFMLib liblastfm liblastfmlib QUIET)
+PKG_SEARCH_MODULE(LastFMLib liblastfm liblastfmlib )
 
-find_package_handle_standard_args(LastFMLib DEFAULT_MSG LastFMLib_FOUND QUIET)
+find_package_handle_standard_args(LastFMLib DEFAULT_MSG LastFMLib_FOUND )
 
 MARK_AS_ADVANCED(LastFMLib_LIBRARIES LastFMLib_INCLUDE_DIRS)
--- origsrc/gerbera-3.0.0/cmake/FindNPUPNP.cmake	2025-11-07 19:18:57.000000000 +0900
+++ src/gerbera-3.0.0/cmake/FindNPUPNP.cmake	2026-01-08 16:53:48.278915200 +0900
@@ -7,7 +7,7 @@
 #  NPUPNP_HAS_IPV6 - If LibNPUPnP was built with IPv6 support
 #  NPUPNP_HAS_REUSEADDR - If LibNPUPnP was built with SO_REUSEADDR support
 find_package(PkgConfig QUIET)
-pkg_search_module (PC_NPUPNP libnpupnp QUIET)
+pkg_search_module (PC_NPUPNP libnpupnp npupnp QUIET)
 
 find_path(NPUPNP_INCLUDE_DIR upnp.h
     HINTS ${PC_NPUPNP_INCLUDEDIR} ${PC_NPUPNP_INCLUDEDIR}/npupnp ${PC_NPUPNP_INCLUDE_DIRS})
--- origsrc/gerbera-3.0.0/src/config/result/edit_helper.h	2025-11-07 19:18:57.000000000 +0900
+++ src/gerbera-3.0.0/src/config/result/edit_helper.h	2026-01-08 16:53:48.280914100 +0900
@@ -194,4 +194,13 @@ void EditHelper<Editable>::_add(const st
     list.push_back(editable);
     indexMap[index] = editable;
 }
+
+// Forward declaration to allow specialization declaration without including dynamic_content.h
+class DynamicContent;
+
+// Explicit specialization is defined in dynamic_content.cc.
+// Declare it here to prevent implicit instantiation of the primary template
+// for EditHelper<DynamicContent>::_add in multiple translation units.
+template <>
+void EditHelper<DynamicContent>::_add(const std::shared_ptr<DynamicContent>& editable, std::size_t index);
 #endif
--- origsrc/gerbera-3.0.0/src/database/sql_table.h	2025-11-07 19:18:57.000000000 +0900
+++ src/gerbera-3.0.0/src/database/sql_table.h	2026-01-08 16:53:48.281919800 +0900
@@ -447,6 +447,17 @@ private:
     static const std::vector<PlaystatusColumn> tableColumnOrder;
 };
 
+// Explicit specializations are defined in sql_table.cc.
+// Declare them here to prevent implicit instantiation of the primary
+// template in multiple translation units (avoids ODR violations).
+template <>
+std::string TableAdaptor<BrowseColumn, CdsObject>::sqlForInsert(
+    const std::shared_ptr<CdsObject>& obj) const;
+
+template <>
+std::string TableAdaptor<MetadataColumn, CdsObject>::sqlForInsert(
+    const std::shared_ptr<CdsObject>& obj) const;
+
 template <class Tab, class Item>
 std::string TableAdaptor<Tab, Item>::sqlForInsert(
     const std::shared_ptr<Item>& obj) const
