--- origsrc/knot-3.5.2/configure.ac	2026-01-14 11:40:37.406923700 +0900
+++ src/knot-3.5.2/configure.ac	2026-01-14 19:19:36.625592800 +0900
@@ -38,7 +38,7 @@ AC_PROG_CC
 AC_PROG_CPP_WERROR
 
 # Set default CFLAGS
-CFLAGS="$CFLAGS -Wall -Wshadow -Werror=format-security -Werror=implicit -Werror=attributes -Wstrict-prototypes"
+CFLAGS="$CFLAGS -Wall -Wshadow -Werror=format-security -Werror=implicit -Wstrict-prototypes"
 
 AX_CHECK_COMPILE_FLAG("-fpredictive-commoning", [CFLAGS="$CFLAGS -fpredictive-commoning"], [], "-Werror")
 AX_CHECK_LINK_FLAG(["-Wl,--exclude-libs,ALL"], [ldflag_exclude_libs="-Wl,--exclude-libs,ALL"], [ldflag_exclude_libs=""], "")
--- origsrc/knot-3.5.2/src/knot/server/server.c	2025-11-28 05:08:58.000000000 +0900
+++ src/knot-3.5.2/src/knot/server/server.c	2026-01-14 11:40:49.937583800 +0900
@@ -193,7 +193,9 @@ static bool enable_pktinfo(int sock, int
 		break;
 	case AF_INET6:
 		level = IPPROTO_IPV6;
+#if defined(IPV6_RECVPKTINFO)
 		option = IPV6_RECVPKTINFO; /* Multiplatform */
+#endif
 		break;
 	default:
 		assert(0);
--- origsrc/knot-3.5.2/src/knot/server/udp-handler.c	2025-11-28 05:08:58.000000000 +0900
+++ src/knot-3.5.2/src/knot/server/udp-handler.c	2026-01-14 11:40:49.945841700 +0900
@@ -106,7 +106,7 @@ static void cmsg_handle_ecn(int **p_ecn,
 static void cmsg_handle_pktinfo(sockaddr_t *local, const iface_t *iface,
                                 struct cmsghdr *cmsg)
 {
-#if defined(IP_PKTINFO)
+#if defined(IP_PKTINFO) && !defined(__CYGWIN__)
 	if (cmsg->cmsg_level == IPPROTO_IP && cmsg->cmsg_type == IP_PKTINFO) {
 		struct in_pktinfo *info = (struct in_pktinfo *)CMSG_DATA(cmsg);
 		info->ipi_spec_dst = info->ipi_addr;
--- origsrc/knot-3.5.2/tests/Makefile.am	2025-11-28 05:08:58.000000000 +0900
+++ src/knot-3.5.2/tests/Makefile.am	2026-01-14 11:40:49.947866900 +0900
@@ -232,7 +232,7 @@ knot/test_semantic_check:
 	@chmod +x $(top_builddir)/tests/$@
 endif HAVE_LIBUTILS
 
-libzscanner/test_zscanner: libzscanner/zscanner-tool
+libzscanner/test_zscanner: libzscanner/zscanner-tool$(EXEEXT)
 	@$(edit) < $(top_srcdir)/tests/$@.in > $(top_builddir)/tests/$@
 	@chmod +x $(top_builddir)/tests/$@
 
