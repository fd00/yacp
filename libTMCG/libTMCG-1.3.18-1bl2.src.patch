--- origsrc/libTMCG-1.3.18/Makefile.am	2017-10-31 20:15:28.000000000 +0900
+++ src/libTMCG-1.3.18/Makefile.am	2025-08-18 17:58:21.032118400 +0900
@@ -23,3 +23,6 @@ DIST_SUBDIRS = src doc tests
 EXTRA_DIST = AUTHORS BUGS COPYING FDL INSTALL NEWS README TODO THANKS\
 	ChangeLog Doxyfile PATENTS
 
+
+pkgconfigdir = $(libdir)/pkgconfig
+pkgconfig_DATA = $(PACKAGE).pc
--- origsrc/libTMCG-1.3.18/configure.ac	2019-05-31 21:03:03.000000000 +0900
+++ src/libTMCG-1.3.18/configure.ac	2025-08-18 17:58:21.059390600 +0900
@@ -201,7 +201,7 @@ else
 	LIBGMP_LIBS=""
 	LIBGMP_CFLAGS=""
 fi
-LIBGMP_LIBS="${LIBGMP_LIBS} -lgmp"
+LIBGMP_LIBS="${LIBGMP_LIBS} -lgmpxx -lgmp"
 AC_SUBST(LIBGMP_LIBS)
 AC_SUBST(LIBGMP_CFLAGS)
 LDFLAGS="$backup_LDFLAGS"
@@ -320,6 +320,7 @@ datadir=$datadir
 # Define output
 AC_CONFIG_FILES([Makefile src/Makefile src/libTMCG-config doc/Makefile\
  tests/Makefile])
+AC_CONFIG_FILES([libTMCG.pc])
 AC_OUTPUT
 
 echo "Now type 'make && make install' to build and install LibTMCG."
--- origsrc/libTMCG-1.3.18/libTMCG.pc.in	1970-01-01 09:00:00.000000000 +0900
+++ src/libTMCG-1.3.18/libTMCG.pc.in	2025-08-18 17:58:20.956590800 +0900
@@ -0,0 +1,10 @@
+prefix=@prefix@
+exec_prefix=@exec_prefix@
+libdir=@libdir@
+includedir=@includedir@
+
+Name: libTMCG
+Description: C++ library for creating secure and fair online card games
+Version: @VERSION@
+Libs: -L${libdir} -lTMCG
+Cflags: -I${includedir}
--- origsrc/libTMCG-1.3.18/src/Makefile.am	2019-05-31 20:26:56.000000000 +0900
+++ src/libTMCG-1.3.18/src/Makefile.am	2025-08-18 09:11:54.361800500 +0900
@@ -92,7 +92,7 @@ libTMCG_la_CFLAGS = @LIBGCRYPT_CFLAGS@ @
 libTMCG_la_CXXFLAGS = @LIBGCRYPT_CFLAGS@ @GPG_ERROR_CFLAGS@ @LIBGMP_CFLAGS@\
  @BOTAN_CFLAGS@
 
-libTMCG_la_LDFLAGS = -version-info\
+libTMCG_la_LDFLAGS = -no-undefined -version-info\
 	@LIBTMCG_LT_CURRENT@:@LIBTMCG_LT_REVISION@:@LIBTMCG_LT_AGE@
 
 libTMCG_la_LIBADD = @LIBGCRYPT_LIBS@ @GPG_ERROR_LIBS@ @LIBGMP_LIBS@ @BOTAN_LIBS@
--- origsrc/libTMCG-1.3.18/src/mpz_helper.cc	2019-05-31 20:26:56.000000000 +0900
+++ src/libTMCG-1.3.18/src/mpz_helper.cc	2025-08-18 14:58:28.449859700 +0900
@@ -91,6 +91,7 @@ size_t tmcg_get_gcry_mpi_ui
 	return result;
 }
 
+#if !defined(__CYGWIN__)
 // iostream operators for mpz_t
 std::ostream& operator <<
 	(std::ostream &out, mpz_srcptr value)
@@ -119,6 +120,7 @@ std::istream& operator >>
 	delete [] buf;
 	return in;
 }
+#endif
 
 // iostream operators for gcry_mpi_t
 std::ostream& operator <<
--- origsrc/libTMCG-1.3.18/src/mpz_helper.hh	2018-06-18 01:18:14.000000000 +0900
+++ src/libTMCG-1.3.18/src/mpz_helper.hh	2025-08-18 14:58:56.889694000 +0900
@@ -43,11 +43,13 @@
 	size_t tmcg_get_gcry_mpi_ui
 		(const gcry_mpi_t in);
 	
+#if !defined(__CYGWIN__)
 	// iostream operators for mpz_t
 	std::ostream& operator <<
 		(std::ostream &out, mpz_srcptr value);
 	std::istream& operator >>
 		(std::istream &in, mpz_ptr value);
+#endif
 
 	// iostream operators for gcry_mpi_t
 	std::ostream& operator <<
--- origsrc/libTMCG-1.3.18/tests/Makefile.am	2019-05-31 20:26:56.000000000 +0900
+++ src/libTMCG-1.3.18/tests/Makefile.am	2025-08-18 16:42:35.159679100 +0900
@@ -21,7 +21,7 @@ TESTS = t-mpz t-rfc4880 t-aio t-vtmf t-v
  t-poker-rot-noninteractive t-poker-aiou t-seabp t-astc t-vss t-astc2 t-dkg
 
 AM_CPPFLAGS = -I$(top_srcdir)/src @LIBGCRYPT_CFLAGS@ @GPG_ERROR_CFLAGS@\
- @LIBGMP_CFLAGS@ @BOTAN_CFLAGS@
+ @LIBGMP_CFLAGS@ @BOTAN_CFLAGS@ -D_GNU_SOURCE
 LDADD = @LIBGCRYPT_LIBS@ @GPG_ERROR_LIBS@ @LIBGMP_LIBS@ @BOTAN_LIBS@\
  ../src/libTMCG.la
 
