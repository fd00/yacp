--- origsrc/libcoopgamma/CMakeLists.txt	1970-01-01 09:00:00.000000000 +0900
+++ src/libcoopgamma/CMakeLists.txt	2026-02-20 09:06:53.281993900 +0900
@@ -0,0 +1,52 @@
+cmake_minimum_required(VERSION 3.5)
+
+project(libcoopgamma LANGUAGES C VERSION 1.2.4)
+
+set(LIB_MAJOR 1)
+set(LIB_MINOR 2)
+set(LIB_VERSION "${LIB_MAJOR}.${LIB_MINOR}")
+
+file(GLOB SOURCES CONFIGURE_DEPENDS "*.c")
+if(EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/test.c")
+  list(REMOVE_ITEM SOURCES "${CMAKE_CURRENT_SOURCE_DIR}/test.c")
+endif()
+
+include_directories(${CMAKE_CURRENT_SOURCE_DIR})
+
+add_library(coopgamma SHARED ${SOURCES})
+set_target_properties(coopgamma PROPERTIES
+  VERSION ${LIB_VERSION}
+  SOVERSION ${LIB_MAJOR})
+target_include_directories(coopgamma PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})
+
+if(EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/test.c")
+  add_executable(test test.c)
+  target_link_libraries(test PRIVATE coopgamma)
+endif()
+
+install(TARGETS coopgamma
+  ARCHIVE DESTINATION lib
+  LIBRARY DESTINATION lib
+  RUNTIME DESTINATION bin)
+
+install(FILES libcoopgamma.h DESTINATION include)
+
+file(GLOB MAN0 "*.0")
+file(GLOB MAN3 "*.3")
+file(GLOB MAN7 "*.7")
+if(MAN0)
+  install(FILES ${MAN0} DESTINATION share/man/man0)
+endif()
+if(MAN3)
+  install(FILES ${MAN3} DESTINATION share/man/man3)
+endif()
+if(MAN7)
+  install(FILES ${MAN7} DESTINATION share/man/man7)
+endif()
+
+set(prefix ${CMAKE_INSTALL_PREFIX})
+set(exec_prefix ${CMAKE_INSTALL_PREFIX})
+set(libdir ${CMAKE_INSTALL_PREFIX}/lib)
+set(includedir ${CMAKE_INSTALL_PREFIX}/include)
+configure_file(${CMAKE_SOURCE_DIR}/libcoopgamma.pc.in ${CMAKE_BINARY_DIR}/libcoopgamma.pc @ONLY)
+install(FILES ${CMAKE_BINARY_DIR}/libcoopgamma.pc DESTINATION ${CMAKE_INSTALL_PREFIX}/lib/pkgconfig)
--- origsrc/libcoopgamma/libcoopgamma.c	2025-02-11 02:28:54.000000000 +0900
+++ src/libcoopgamma/libcoopgamma.c	2026-02-20 05:42:04.948925800 +0900
@@ -3,7 +3,13 @@
 
 
 #if defined(__GNUC__)
-const char *argv0 __attribute__((weak)) = "libcoopgamma";
+#  if defined(__CYGWIN__)
+#    define LIBCOOPGAMMA_WEAK
+#  else
+#    define LIBCOOPGAMMA_WEAK __attribute__((weak))
+#  endif
+const char *argv0 LIBCOOPGAMMA_WEAK = "libcoopgamma";
+#  undef LIBCOOPGAMMA_WEAK
 #endif
 
 
--- origsrc/libcoopgamma/libcoopgamma.pc.in	1970-01-01 09:00:00.000000000 +0900
+++ src/libcoopgamma/libcoopgamma.pc.in	2026-02-20 09:04:07.678745200 +0900
@@ -0,0 +1,10 @@
+prefix=@prefix@
+exec_prefix=@exec_prefix@
+libdir=@libdir@
+includedir=@includedir@
+
+Name: libcoopgamma
+Description: Cooperative gamma library
+Version: @PROJECT_VERSION@
+Libs: -L${libdir} -lcoopgamma
+Cflags: -I${includedir}
