--- origsrc/libdatovka-0.7.2/configure.ac	2025-09-23 01:31:05.000000000 +0900
+++ src/libdatovka-0.7.2/configure.ac	2026-01-16 23:35:31.091202300 +0900
@@ -137,13 +137,14 @@ AS_IF([test "x${enable_openssl_backend}"
   dnl Use default cryptographic back-end.
 
   #TODO: Determine minimal version
-  AM_PATH_LIBGCRYPT([1:1.4.0])
+  PKG_CHECK_MODULES([LIBGCRYPT], [libgcrypt >= 1.4.0])
 
   # GPGME is compiled with large file support by default. We need to follow not
   # to break ABI.
   AC_SYS_LARGEFILE
   #TODO: Determine minimal version
-  AM_PATH_GPGME()
+  PKG_CHECK_MODULES([GPGME], [gpgme])
+  PKG_CHECK_MODULES([GPG_ERROR], [gpg-error])
 ])
 AM_CONDITIONAL([USE_OPENSSL_BACKEND], [test "x${enable_openssl_backend}" = "xyes"])
 
--- origsrc/libdatovka-0.7.2/src/Makefile.am	2025-09-23 01:27:44.000000000 +0900
+++ src/libdatovka-0.7.2/src/Makefile.am	2026-01-17 00:00:15.488681800 +0900
@@ -69,5 +69,5 @@ endif
 libdatovka_la_CPPFLAGS = @XML_CPPFLAGS@ @LIBCURL_CPPFLAGS@ \
 	-DLOCALEDIR=\"$(localedir)\" $(AM_CPPFLAGS)
 libdatovka_la_CFLAGS = @LIBGCRYPT_CFLAGS@ @GPGME_CFLAGS@
-libdatovka_la_LDFLAGS = -version-info 9:0:1 @XML_LIBS@ @LIBCURL@ @LIBGCRYPT_LIBS@ \
-	@GPGME_LIBS@ @EXPAT_LIBS@ @LTLIBINTL@
+libdatovka_la_LDFLAGS = -no-undefined -version-info 9:0:1 @XML_LIBS@ @LIBCURL@ @LIBGCRYPT_LIBS@ \
+	@GPGME_LIBS@ @GPG_ERROR_LIBS@ @EXPAT_LIBS@ @LTLIBINTL@
