--- origsrc/libwebsockets-4.5.2/CMakeLists.txt	2025-12-03 15:15:09.000000000 +0900
+++ src/libwebsockets-4.5.2/CMakeLists.txt	2026-01-23 07:02:46.512972800 +0900
@@ -456,7 +456,7 @@ endmacro()
 #
 
 find_package(Git)
-if(GIT_EXECUTABLE)
+if(GIT_EXECUTABLE AND EXISTS "${CMAKE_SOURCE_DIR}/.git")
 	execute_process(
 		WORKING_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}"
 		COMMAND "${GIT_EXECUTABLE}" describe --tags --always
@@ -497,7 +497,11 @@ set(CPACK_PACKAGE_VERSION_MAJOR "4")
 set(CPACK_PACKAGE_VERSION_MINOR "5")
 set(CPACK_PACKAGE_VERSION_PATCH_NUMBER "2")
 
-set(CPACK_PACKAGE_VERSION_PATCH "${CPACK_PACKAGE_VERSION_PATCH_NUMBER}-${LWS_BUILD_HASH}")
+if (LWS_BUILD_HASH STREQUAL "unknown")
+	set(CPACK_PACKAGE_VERSION_PATCH "${CPACK_PACKAGE_VERSION_PATCH_NUMBER}")
+else()
+	set(CPACK_PACKAGE_VERSION_PATCH "${CPACK_PACKAGE_VERSION_PATCH_NUMBER}-${LWS_BUILD_HASH}")
+endif()
 set(CPACK_PACKAGE_RELEASE 1)
 
 set(CPACK_PACKAGE_VERSION "${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}.${CPACK_PACKAGE_VERSION_PATCH}")
@@ -703,6 +707,7 @@ else()
 	CHECK_C_SOURCE_COMPILES("#include <net/ethernet.h>\nvoid main(void) { while(1) ; } void xxexit(void){}" LWS_HAVE_NET_ETHERNET_H)
 endif()
 CHECK_C_SOURCE_COMPILES("#include <systemd/sd-daemon.h>\nvoid main(void) { while(1) ; } void xxexit(void){}" LWS_HAVE_SYSTEMD_H)
+CHECK_C_SOURCE_COMPILES("#include <net/route.h>\nvoid main(void) { while(1) ; } void xxexit(void){}" LWS_HAVE_NET_ROUTE_H)
 
 if (${CMAKE_SYSTEM_NAME} MATCHES "SunOS")
 	unset(LWS_HAVE_CTIME_R CACHE)
--- origsrc/libwebsockets-4.5.2/include/libwebsockets.h	2025-12-03 15:15:09.000000000 +0900
+++ src/libwebsockets-4.5.2/include/libwebsockets.h	2026-01-23 06:13:24.944029700 +0900
@@ -48,7 +48,7 @@ extern "C" {
 #if defined(LWS_HAVE_NET_IF_ETHER_H)
 #include <net/if_ether.h>
 #endif
-#if defined(_WIN32) && !defined(ETHER_ADDR_LEN)
+#if !defined(ETHER_ADDR_LEN)
 #define ETHER_ADDR_LEN 6
 #endif
 #if defined (__sun)
--- origsrc/libwebsockets-4.5.2/lib/CMakeLists.txt	2025-12-03 15:15:09.000000000 +0900
+++ src/libwebsockets-4.5.2/lib/CMakeLists.txt	2026-01-23 06:28:53.094944600 +0900
@@ -387,7 +387,7 @@ endif()
 # Generate and install pkgconfig.
 # (This is not indented, because the tabs will be part of the output)
 file(WRITE "${PROJECT_BINARY_DIR}/libwebsockets.pc"
-"prefix=\"${CMAKE_INSTALL_PREFIX}\"
+"prefix=${CMAKE_INSTALL_PREFIX}
 exec_prefix=\${prefix}
 libdir=\${exec_prefix}/${LWS_INSTALL_LIB_DIR}
 includedir=\${prefix}/${LWS_INSTALL_INCLUDE_DIR}
--- origsrc/libwebsockets-4.5.2/lib/plat/unix/unix-sockets.c	2025-12-03 15:15:09.000000000 +0900
+++ src/libwebsockets-4.5.2/lib/plat/unix/unix-sockets.c	2026-01-23 00:37:54.370231900 +0900
@@ -33,7 +33,7 @@
 
 #include <sys/ioctl.h>
 
-#if !defined(LWS_DETECTED_PLAT_IOS)
+#if defined(LWS_HAVE_NET_ROUTE_H)
 #include <net/route.h>
 #endif
 
--- origsrc/libwebsockets-4.5.2/plugins/CMakeLists.txt	2025-12-03 15:15:09.000000000 +0900
+++ src/libwebsockets-4.5.2/plugins/CMakeLists.txt	2026-01-23 00:40:33.760547600 +0900
@@ -234,7 +234,7 @@ if (LWS_WITH_PLUGINS AND NOT LWS_WITH_PL
 
 	install(TARGETS ${PLUGINS_LIST}
 		PERMISSIONS  OWNER_WRITE OWNER_EXECUTE GROUP_EXECUTE WORLD_EXECUTE OWNER_READ GROUP_READ WORLD_READ
-		DESTINATION share/libwebsockets-test-server/plugins
+		RUNTIME DESTINATION share/libwebsockets-test-server/plugins
 		COMPONENT plugins)
 
 	if (NOT WIN32)
