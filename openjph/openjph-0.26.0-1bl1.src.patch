--- origsrc/OpenJPH-0.26.0/tests/CMakeLists.txt	2025-12-24 13:08:37.000000000 +0900
+++ src/OpenJPH-0.26.0/tests/CMakeLists.txt	2026-01-30 09:55:25.696300200 +0900
@@ -1,6 +1,9 @@
+include(FetchContent)
+
+find_Package(GTest)
+if (NOT GTest_FOUND)
 
 # Fetch googletest
-include(FetchContent)
 FetchContent_Declare(
   googletest
   URL https://github.com/google/googletest/archive/refs/tags/v1.14.0.tar.gz
@@ -12,6 +15,8 @@ set(BUILD_GMOCK OFF CACHE BOOL "" FORCE)
 option(INSTALL_GTEST "Enable installation of googletest." OFF)
 FetchContent_MakeAvailable(googletest)
 
+endif()
+
 # Fetch test files
 FetchContent_Declare(
   jp2k_test_codestreams
@@ -40,8 +45,12 @@ target_link_libraries(
   GTest::gtest_main
 )
 
+if (GTest_FOUND)
+add_test(Tests test_executables)
+else()
 include(GoogleTest)
 gtest_add_tests(TARGET test_executables)
+endif()
 
 if (MSVC)
   add_custom_command(TARGET test_executables POST_BUILD
@@ -74,7 +83,7 @@ else()
       COMMAND ${CMAKE_COMMAND} -E copy "$<TARGET_FILE_DIR:ojph_compress>/ojph_compress.wasm" "./"
     )
   endif(EMSCRIPTEN)
-  if(CYGWIN OR MINGW)
+  if(MINGW)
     add_custom_command(TARGET test_executables POST_BUILD
       COMMAND ${CMAKE_COMMAND} -E copy "../bin/${CMAKE_SHARED_LIBRARY_PREFIX}gtest.dll" "./"
       COMMAND ${CMAKE_COMMAND} -E copy "../bin/${CMAKE_SHARED_LIBRARY_PREFIX}gtest_main.dll" "./"
