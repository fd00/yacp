--- origsrc/subnetcalc-2.6.5/CMakeLists.txt	2025-09-22 00:55:11.000000000 +0900
+++ src/subnetcalc-2.6.5/CMakeLists.txt	2026-02-04 09:18:55.260677200 +0900
@@ -87,7 +87,7 @@ ENDIF()
 #### OS DEPENDENT                                                        ####
 #############################################################################
 
-IF (${CMAKE_SYSTEM_NAME} MATCHES "Linux")
+IF (${CMAKE_SYSTEM_NAME} MATCHES "Linux" OR CYGWIN)
     MESSAGE(STATUS ${CMAKE_SYSTEM_NAME} " supported")
 
 ELSEIF (${CMAKE_SYSTEM_NAME} MATCHES "FreeBSD")
@@ -149,11 +149,11 @@ ENDIF()
 
 INCLUDE(FindPackageHandleStandardArgs)
 
+FIND_PACKAGE(PkgConfig REQUIRED)
+
 # ###### GeoIP ##############################################################
-FIND_LIBRARY(GEOIP_LIBRARY NAMES GeoIP)
-FIND_PATH(GEOIP_INCLUDE_DIR NAMES GeoIP.h GeoIPCity.h)
-IF ((GEOIP_LIBRARY) AND (GEOIP_INCLUDE_DIR))
-   FIND_PACKAGE_HANDLE_STANDARD_ARGS(GeoIP DEFAULT_MSG GEOIP_LIBRARY GEOIP_INCLUDE_DIR)
+PKG_CHECK_MODULES(GEOIP geoip)
+IF (GEOIP_FOUND)
    INCLUDE_DIRECTORIES(${GEOIP_INCLUDE_DIR})
    ADD_DEFINITIONS(-DHAVE_GEOIP -DHAVE_GEOIP_IPV6)
    MESSAGE(STATUS "GeoIP found.")
--- origsrc/subnetcalc-2.6.5/src/CMakeLists.txt	2025-09-02 05:26:26.000000000 +0900
+++ src/subnetcalc-2.6.5/src/CMakeLists.txt	2026-02-04 09:19:14.515760000 +0900
@@ -46,7 +46,7 @@ INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINA
 ADD_EXECUTABLE(subnetcalc subnetcalc.cc tools.cc)
 TARGET_LINK_LIBRARIES(subnetcalc ${Intl_LIBRARIES})
 IF (GEOIP_FOUND)
-   TARGET_LINK_LIBRARIES(subnetcalc ${GEOIP_LIBRARY})
+   TARGET_LINK_LIBRARIES(subnetcalc ${GEOIP_LIBRARIES})
 ENDIF()
 INSTALL(TARGETS     subnetcalc   RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR})
 INSTALL(FILES       subnetcalc.1 DESTINATION         ${CMAKE_INSTALL_MANDIR}/man1)
