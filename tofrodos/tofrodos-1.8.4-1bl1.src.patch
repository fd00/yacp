--- origsrc/tofrodos-1.8.4/src/Makefile	2026-01-08 08:51:35.000000000 +0900
+++ src/tofrodos-1.8.4/src/Makefile	2026-02-05 16:28:37.231994800 +0900
@@ -30,7 +30,7 @@ MV = mv
 RM = rm -f
 
 # flags
-CFLAGS = $(DEFINES) $(TFLAG) $(CDEBUG) -c -Wall
+CFLAGS ?= $(DEFINES) $(TFLAG) $(CDEBUG) -c -Wall
 GZIPFLAGS = -9
 INSTALLBINFLAGS = -m 755
 INSTALLDATAFLAGS = -m 644
@@ -58,7 +58,7 @@ OBJS =	emsg.o \
 
 # implicit rules
 .c.o:
-	$(CC) $(CFLAGS) $<
+	$(CC) $(CFLAGS) -c $<
 
 # user visible rules
 all: $(FROMDOS) $(TODOS)
--- origsrc/tofrodos-1.8.4/src/config.h	2026-01-08 08:51:35.000000000 +0900
+++ src/tofrodos-1.8.4/src/config.h	2026-02-05 16:34:22.399570500 +0900
@@ -99,6 +99,12 @@ extern "C" {
 #endif
 #endif
 
+#if defined(__CYGWIN__)
+#if !defined(UNIX)
+#define UNIX
+#endif
+#endif
+
 /* define what headers we have (based on the systems) */
 #if defined(UNIX) || (__MINGW32__)
 #define	HAVE_UNISTD_H
--- origsrc/tofrodos-1.8.4/src/init.c	2026-01-08 08:51:35.000000000 +0900
+++ src/tofrodos-1.8.4/src/init.c	2026-02-05 16:28:37.241759500 +0900
@@ -16,6 +16,8 @@
 #include <unistd.h> /* getopt() */
 #endif
 
+#include <getopt.h>
+
 /* our own headers */
 #include "emsg.h"
 #include "tofrodos.h"
--- origsrc/tofrodos-1.8.4/src/tofrodos.c	2026-01-08 08:51:35.000000000 +0900
+++ src/tofrodos-1.8.4/src/tofrodos.c	2026-02-05 16:28:37.245801400 +0900
@@ -33,6 +33,8 @@
 #include <unistd.h>	/* chmod(), mktemp(), isatty(), chown(), readlink(), mkstemp() in some systems, getopt() */
 #endif
 
+#include <getopt.h>	/* getopt() */
+
 /* our headers */
 #include "emsg.h"
 #include "tofrodos.h"
