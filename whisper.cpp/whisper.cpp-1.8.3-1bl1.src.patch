--- origsrc/whisper.cpp-1.8.3/cmake/build-info.cmake	2026-01-15 18:54:31.000000000 +0900
+++ src/whisper.cpp-1.8.3/cmake/build-info.cmake	2026-02-07 11:00:31.299035300 +0900
@@ -16,7 +16,7 @@ if(NOT Git_FOUND)
 endif()
 
 # Get the commit count and hash
-if(Git_FOUND)
+if(Git_FOUND AND EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/.git")
     execute_process(
         COMMAND ${GIT_EXECUTABLE} rev-parse --short HEAD
         WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
--- origsrc/whisper.cpp-1.8.3/cmake/git-vars.cmake	2026-01-15 18:54:31.000000000 +0900
+++ src/whisper.cpp-1.8.3/cmake/git-vars.cmake	2026-02-07 11:00:31.306843100 +0900
@@ -1,5 +1,6 @@
 find_package(Git)
 
+if (GIT_FOUND AND EXISTS "${CMAKE_SOURCE_DIR}/.git")
 # the commit's SHA1
 execute_process(COMMAND
     "${GIT_EXECUTABLE}" describe --match=NeVeRmAtCh --always --abbrev=8
@@ -20,3 +21,4 @@ execute_process(COMMAND
     WORKING_DIRECTORY "${CMAKE_SOURCE_DIR}"
     OUTPUT_VARIABLE GIT_COMMIT_SUBJECT
     ERROR_QUIET OUTPUT_STRIP_TRAILING_WHITESPACE)
+endif()
--- origsrc/whisper.cpp-1.8.3/examples/common-sdl.cpp	2026-01-15 18:54:31.000000000 +0900
+++ src/whisper.cpp-1.8.3/examples/common-sdl.cpp	2026-02-07 11:00:31.306843100 +0900
@@ -1,6 +1,7 @@
 #include "common-sdl.h"
 
 #include <cstdio>
+#include <cstring>
 
 audio_async::audio_async(int len_ms) {
     m_len_ms = len_ms;
--- origsrc/whisper.cpp-1.8.3/examples/stream/stream.cpp	2026-01-15 18:54:31.000000000 +0900
+++ src/whisper.cpp-1.8.3/examples/stream/stream.cpp	2026-02-07 11:00:31.306843100 +0900
@@ -9,6 +9,7 @@
 
 #include <chrono>
 #include <cstdio>
+#include <cstring>
 #include <fstream>
 #include <string>
 #include <thread>
--- origsrc/whisper.cpp-1.8.3/examples/talk-llama/llama-mmap.cpp	2026-01-15 18:54:31.000000000 +0900
+++ src/whisper.cpp-1.8.3/examples/talk-llama/llama-mmap.cpp	2026-02-07 11:00:31.313842600 +0900
@@ -611,7 +611,7 @@ struct llama_mlock::impl {
 
         char* errmsg = std::strerror(errno);
         bool suggest = (errno == ENOMEM);
-#if defined(TARGET_OS_VISION) || defined(TARGET_OS_TV) || defined(_AIX)
+#if !defined(RLIMIT_MEMLOCK) || defined(TARGET_OS_VISION) || defined(TARGET_OS_TV) || defined(_AIX)
         // visionOS/tvOS dont't support RLIMIT_MEMLOCK
         // Skip resource limit checks on visionOS/tvOS
         suggest = false;
