HOMEPAGE="https://github.com/gwenhael-le-moine/${PN}"
SRC_URI="https://github.com/gwenhael-le-moine/${PN}/archive/refs/tags/${PV}.tar.gz"

CATEGORY="Utils"
SUMMARY="Reboot of the x48 HP 48 emulator"
DESCRIPTION="${SUMMARY}"

LICENSE="GPL-2.0-or-later"
LICENSE_SPDX="SPDX-License-Identifier: GPL-2.0-or-later"
LICENSE_URI="LICENSE"

BUILD_REQUIRES="
	liblua-devel
	libncurses-devel
	libreadline-devel
	libSDL3-devel
"

src_compile()
{
	cd ${B}
	lndirs
	cygmake
}

src_install()
{
	cd ${B}
	cyginstall

	cd ${D}
	verbose rm usr/doc/${PN}/[ALR]*
	verbose mkdir -p usr/share/doc/${PN}
	verbose mv usr/doc/${PN}/doc_0.6.4 usr/share/doc/${PN}/
	verbose mkdir -p usr/share/${PN}
	verbose mv usr/doc/${PN}/config.lua usr/share/${PN}/
	verbose mv usr/doc/${PN}/romdump usr/share/${PN}/
}

DOCS="
	*.png
"

DIFF_EXCLUDES="
	config.lua
"
